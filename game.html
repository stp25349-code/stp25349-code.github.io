<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ohh Babe - Jump King Adventure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: radial-gradient(ellipse at center, #2d5a27 0%, #1a3d1a 100%);
            font-family: 'Courier New', monospace;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .game-title {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 32px;
            font-weight: bold;
            text-shadow: 3px 3px 0px #000;
            z-index: 100;
        }

        .player-name {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 18px;
            text-shadow: 2px 2px 0px #000;
            z-index: 100;
        }

        #gameCanvas {
            border: 4px solid #2d4a2d;
            background: linear-gradient(180deg, #87CEEB 0%, #98FB98 20%, #228B22 60%, #006400 100%);
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
            box-shadow: 0 0 30px rgba(0, 100, 0, 0.5);
        }

        .controls {
            position: absolute;
            bottom: 20px;
            color: white;
            text-align: center;
            font-size: 14px;
            text-shadow: 2px 2px 0px #000;
        }

        .power-bar {
            position: absolute;
            bottom: 100px;
            left: 20px;
            width: 30px;
            height: 200px;
            background: rgba(0,0,0,0.5);
            border: 2px solid white;
            border-radius: 15px;
        }

        .power-fill {
            width: 100%;
            background: linear-gradient(0deg, #ff0000, #ffff00, #00ff00);
            border-radius: 13px;
            transition: height 0.1s;
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            display: none;
            z-index: 200;
        }

        .win-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #333;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            display: none;
            z-index: 200;
            border: 4px solid #fff;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
    </style>
</head>
<body>
    <div class="game-title">Ohh Babe</div>
    <div class="player-name">King Oak</div>
    
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    
    <div class="power-bar">
        <div class="power-fill" id="powerFill"></div>
    </div>
    
    <div class="controls">
        Press SPACE to charge jump power, Release to jump!<br>
        Use LEFT/RIGHT arrows to control direction
    </div>

    <div class="game-over" id="gameOver">
        <h2>Game Over!</h2>
        <p>King Oak fell down!</p>
        <button onclick="restartGame()">Try Again</button>
    </div>

    <div class="win-message" id="winMessage">
        <h2>ðŸŽ‰ Congratulations! ðŸŽ‰</h2>
        <p>King Oak has reached his beloved!</p>
        <p>"Ohh Babe, I made it!"</p>
        <button onclick="restartGame()">Play Again</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const powerFill = document.getElementById('powerFill');
        
        // Game state
        let gameState = {
            player: {
                x: 400,
                y: 550,
                width: 20,
                height: 30,
                velocityX: 0,
                velocityY: 0,
                onGround: false,
                charging: false,
                power: 0,
                maxPower: 100,
                color: '#FF6B35'
            },
            princess: {
                x: 380,
                y: 50,
                width: 40,
                height: 40,
                color: '#FFB6C1'
            },
            platforms: [
                // Ground level
                {x: 0, y: 580, width: 800, height: 20, color: '#8B4513'},
                
                // Level 1
                {x: 50, y: 520, width: 100, height: 20, color: '#228B22'},
                {x: 200, y: 480, width: 80, height: 20, color: '#228B22'},
                {x: 350, y: 450, width: 100, height: 20, color: '#228B22'},
                {x: 500, y: 420, width: 80, height: 20, color: '#228B22'},
                {x: 650, y: 460, width: 100, height: 20, color: '#228B22'},
                
                // Level 2
                {x: 100, y: 380, width: 80, height: 20, color: '#32CD32'},
                {x: 250, y: 340, width: 100, height: 20, color: '#32CD32'},
                {x: 420, y: 320, width: 80, height: 20, color: '#32CD32'},
                {x: 570, y: 360, width: 100, height: 20, color: '#32CD32'},
                
                // Level 3
                {x: 30, y: 280, width: 90, height: 20, color: '#90EE90'},
                {x: 180, y: 240, width: 80, height: 20, color: '#90EE90'},
                {x: 320, y: 200, width: 100, height: 20, color: '#90EE90'},
                {x: 480, y: 220, width: 90, height: 20, color: '#90EE90'},
                {x: 630, y: 260, width: 80, height: 20, color: '#90EE90'},
                
                // Level 4 - Final platforms
                {x: 120, y: 160, width: 70, height: 20, color: '#FFD700'},
                {x: 280, y: 120, width: 80, height: 20, color: '#FFD700'},
                {x: 450, y: 140, width: 70, height: 20, color: '#FFD700'},
                
                // Final platform
                {x: 350, y: 90, width: 100, height: 20, color: '#FF69B4'}
            ],
            camera: {
                y: 0
            },
            keys: {},
            gameWon: false
        };

        // Input handling
        document.addEventListener('keydown', (e) => {
            gameState.keys[e.code] = true;
            
            if (e.code === 'Space') {
                e.preventDefault();
                if (gameState.player.onGround && !gameState.player.charging) {
                    gameState.player.charging = true;
                    gameState.player.power = 0;
                }
            }
        });

        document.addEventListener('keyup', (e) => {
            gameState.keys[e.code] = false;
            
            if (e.code === 'Space' && gameState.player.charging) {
                jump();
            }
        });

        function jump() {
            if (!gameState.player.onGround || !gameState.player.charging) return;
            
            const power = gameState.player.power / gameState.player.maxPower;
            const jumpForce = 8 + (power * 12); // Max jump force of 20
            
            gameState.player.velocityY = -jumpForce;
            
            // Horizontal movement
            if (gameState.keys['ArrowLeft']) {
                gameState.player.velocityX = -4 - (power * 2);
            } else if (gameState.keys['ArrowRight']) {
                gameState.player.velocityX = 4 + (power * 2);
            }
            
            gameState.player.charging = false;
            gameState.player.power = 0;
            gameState.player.onGround = false;
        }

        function updatePlayer() {
            const player = gameState.player;
            
            // Charging power
            if (player.charging && player.onGround) {
                player.power = Math.min(player.power + 2, player.maxPower);
                
                // Update power bar
                const powerPercentage = (player.power / player.maxPower) * 100;
                powerFill.style.height = powerPercentage + '%';
            } else {
                powerFill.style.height = '0%';
            }
            
            // Physics
            player.velocityY += 0.5; // Gravity
            player.velocityX *= 0.98; // Air resistance
            
            // Update position
            player.x += player.velocityX;
            player.y += player.velocityY;
            
            // Boundary checks
            if (player.x < 0) player.x = 0;
            if (player.x + player.width > canvas.width) player.x = canvas.width - player.width;
            
            // Reset if fall too far
            if (player.y > canvas.height + 200) {
                showGameOver();
            }
            
            // Platform collision
            player.onGround = false;
            for (let platform of gameState.platforms) {
                const adjustedPlatformY = platform.y - gameState.camera.y;
                
                if (player.x + player.width > platform.x &&
                    player.x < platform.x + platform.width &&
                    player.y + player.height > adjustedPlatformY &&
                    player.y + player.height < adjustedPlatformY + platform.height + 10 &&
                    player.velocityY >= 0) {
                    
                    player.y = adjustedPlatformY - player.height;
                    player.velocityY = 0;
                    player.onGround = true;
                    break;
                }
            }
            
            // Camera follow
            const targetCameraY = Math.max(0, (canvas.height - 200) - player.y);
            gameState.camera.y += (targetCameraY - gameState.camera.y) * 0.1;
            
            // Win condition
            const princess = gameState.princess;
            const adjustedPrincessY = princess.y - gameState.camera.y;
            
            if (player.x + player.width > princess.x &&
                player.x < princess.x + princess.width &&
                player.y + player.height > adjustedPrincessY &&
                player.y < adjustedPrincessY + princess.height &&
                !gameState.gameWon) {
                
                gameState.gameWon = true;
                showWinMessage();
            }
        }

        function drawPixelCharacter(x, y, color, isPlayer = true) {
            ctx.fillStyle = color;
            
            if (isPlayer) {
                // King Oak (simple pixel character)
                ctx.fillRect(x + 6, y, 8, 8); // Head
                ctx.fillRect(x + 4, y + 8, 12, 12); // Body
                ctx.fillRect(x + 2, y + 12, 4, 8); // Left arm
                ctx.fillRect(x + 14, y + 12, 4, 8); // Right arm
                ctx.fillRect(x + 6, y + 20, 4, 10); // Left leg
                ctx.fillRect(x + 10, y + 20, 4, 10); // Right leg
                
                // Crown
                ctx.fillStyle = '#FFD700';
                ctx.fillRect(x + 6, y - 3, 8, 3);
                ctx.fillRect(x + 7, y - 6, 2, 3);
                ctx.fillRect(x + 11, y - 6, 2, 3);
            } else {
                // Princess (simple pixel character)
                ctx.fillRect(x + 8, y, 8, 8); // Head
                ctx.fillRect(x + 4, y + 8, 16, 15); // Dress
                ctx.fillRect(x + 2, y + 12, 4, 6); // Left arm
                ctx.fillRect(x + 18, y + 12, 4, 6); // Right arm
                
                // Tiara
                ctx.fillStyle = '#FFD700';
                ctx.fillRect(x + 8, y - 2, 8, 2);
                ctx.fillRect(x + 10, y - 4, 2, 2);
                ctx.fillRect(x + 14, y - 4, 2, 2);
                
                // Hair
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(x + 6, y + 2, 12, 6);
            }
        }

        function render() {
            // Clear canvas with forest background gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#87CEEB'); // Sky blue
            gradient.addColorStop(0.3, '#98FB98'); // Light green
            gradient.addColorStop(0.7, '#228B22'); // Forest green
            gradient.addColorStop(1, '#006400'); // Dark green
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw forest background elements
            drawForestBackground();
            
            // Draw platforms with more natural forest look
            for (let platform of gameState.platforms) {
                const adjustedY = platform.y - gameState.camera.y;
                if (adjustedY > -platform.height && adjustedY < canvas.height + platform.height) {
                    // Main platform
                    ctx.fillStyle = platform.color;
                    ctx.fillRect(platform.x, adjustedY, platform.width, platform.height);
                    
                    // Add moss/grass on top
                    ctx.fillStyle = '#32CD32';
                    ctx.fillRect(platform.x, adjustedY, platform.width, 3);
                    
                    // Add small grass details
                    for (let i = platform.x; i < platform.x + platform.width; i += 8) {
                        if (Math.random() > 0.7) {
                            ctx.fillStyle = '#90EE90';
                            ctx.fillRect(i, adjustedY - 2, 2, 4);
                        }
                    }
                    
                    // Platform border with wood texture
                    ctx.strokeStyle = '#654321';
                    ctx.lineWidth = 2;
                    ctx.strokeRect(platform.x, adjustedY, platform.width, platform.height);
                    
                    // Wood grain lines
                    ctx.strokeStyle = '#8B4513';
                    ctx.lineWidth = 1;
                    for (let i = 0; i < 3; i++) {
                        const lineY = adjustedY + (platform.height / 4) * (i + 1);
                        ctx.beginPath();
                        ctx.moveTo(platform.x + 2, lineY);
                        ctx.lineTo(platform.x + platform.width - 2, lineY);
                        ctx.stroke();
                    }
                }
            }
            
            // Draw princess
            const princess = gameState.princess;
            const adjustedPrincessY = princess.y - gameState.camera.y;
            if (adjustedPrincessY > -princess.height && adjustedPrincessY < canvas.height + princess.height) {
                drawPixelCharacter(princess.x, adjustedPrincessY, princess.color, false);
                
                // Enhanced heart effect
                drawFloatingHearts(princess.x + 20, adjustedPrincessY - 20);
                
                // Magical sparkles around princess
                for (let i = 0; i < 8; i++) {
                    const sparkleX = princess.x + Math.sin(Date.now() * 0.01 + i) * 30;
                    const sparkleY = adjustedPrincessY + Math.cos(Date.now() * 0.01 + i) * 20;
                    ctx.fillStyle = '#FFD700';
                    ctx.fillRect(sparkleX, sparkleY, 2, 2);
                }
            }
            
            // Draw player
            const player = gameState.player;
            drawPixelCharacter(player.x, player.y, player.color, true);
            
            // Enhanced charging effect
            if (player.charging) {
                const glowIntensity = (player.power / player.maxPower) * 255;
                ctx.shadowColor = `rgba(255, 215, 0, ${glowIntensity / 255})`;
                ctx.shadowBlur = 15;
                ctx.strokeStyle = '#FFD700';
                ctx.lineWidth = 3;
                ctx.strokeRect(player.x - 5, player.y - 5, player.width + 10, player.height + 10);
                ctx.shadowBlur = 0;
                
                // Power particles
                for (let i = 0; i < player.power / 10; i++) {
                    const particleX = player.x + Math.random() * player.width;
                    const particleY = player.y + Math.random() * player.height;
                    ctx.fillStyle = `rgba(255, 215, 0, ${Math.random()})`;
                    ctx.fillRect(particleX, particleY, 2, 2);
                }
            }
            
            // Draw foreground forest elements
            drawForegroundTrees();
        }

        function drawForestBackground() {
            // Draw distant mountains
            ctx.fillStyle = '#4682B4';
            ctx.beginPath();
            ctx.moveTo(0, 150 - gameState.camera.y * 0.1);
            ctx.lineTo(200, 100 - gameState.camera.y * 0.1);
            ctx.lineTo(400, 130 - gameState.camera.y * 0.1);
            ctx.lineTo(600, 80 - gameState.camera.y * 0.1);
            ctx.lineTo(800, 120 - gameState.camera.y * 0.1);
            ctx.lineTo(800, 600);
            ctx.lineTo(0, 600);
            ctx.closePath();
            ctx.fill();
            
            // Draw background trees (parallax effect)
            for (let i = 0; i < 15; i++) {
                const treeX = (i * 60) + Math.sin(i) * 20;
                const treeY = 200 + Math.sin(i * 0.5) * 50 - gameState.camera.y * 0.3;
                drawBackgroundTree(treeX, treeY, 0.7 + Math.sin(i) * 0.3);
            }
            
            // Draw mid-ground trees
            for (let i = 0; i < 10; i++) {
                const treeX = (i * 80) + Math.cos(i) * 30;
                const treeY = 300 + Math.cos(i * 0.7) * 40 - gameState.camera.y * 0.6;
                drawBackgroundTree(treeX, treeY, 1.0 + Math.cos(i) * 0.2);
            }
            
            // Add floating particles (leaves, dust)
            drawFloatingParticles();
        }

        function drawBackgroundTree(x, y, scale) {
            if (y < -100 || y > canvas.height + 100) return;
            
            const trunkWidth = 8 * scale;
            const trunkHeight = 40 * scale;
            const crownRadius = 25 * scale;
            
            // Tree trunk
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(x - trunkWidth/2, y, trunkWidth, trunkHeight);
            
            // Tree crown (multiple layers for depth)
            ctx.fillStyle = '#228B22';
            ctx.beginPath();
            ctx.arc(x, y - crownRadius/2, crownRadius * 0.8, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#32CD32';
            ctx.beginPath();
            ctx.arc(x - crownRadius/3, y - crownRadius/3, crownRadius * 0.6, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.beginPath();
            ctx.arc(x + crownRadius/3, y - crownRadius/4, crownRadius * 0.5, 0, Math.PI * 2);
            ctx.fill();
        }

        function drawForegroundTrees() {
            // Draw some foreground trees for depth
            for (let i = 0; i < 5; i++) {
                const treeX = (i * 150) + 50;
                const treeY = 500 - gameState.camera.y * 0.9;
                
                if (treeY > -150 && treeY < canvas.height + 50) {
                    // Large foreground tree
                    ctx.fillStyle = '#654321';
                    ctx.fillRect(treeX - 6, treeY, 12, 60);
                    
                    // Large tree crown
                    ctx.fillStyle = '#006400';
                    ctx.beginPath();
                    ctx.arc(treeX, treeY - 20, 35, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.fillStyle = '#228B22';
                    ctx.beginPath();
                    ctx.arc(treeX - 15, treeY - 10, 25, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.arc(treeX + 15, treeY - 15, 20, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        function drawFloatingParticles() {
            const time = Date.now() * 0.001;
            
            for (let i = 0; i < 20; i++) {
                const x = (i * 40) + Math.sin(time + i) * 100;
                const y = (i * 30) + Math.cos(time + i * 0.7) * 50 - gameState.camera.y * 0.5;
                
                if (y > -10 && y < canvas.height + 10) {
                    ctx.fillStyle = i % 3 === 0 ? '#90EE90' : '#98FB98';
                    ctx.fillRect(x, y, 2, 2);
                }
            }
        }

        function drawFloatingHearts(x, y) {
            const time = Date.now() * 0.003;
            
            for (let i = 0; i < 3; i++) {
                const heartX = x + Math.sin(time + i) * 10;
                const heartY = y + Math.cos(time + i * 0.8) * 8 - i * 8;
                const alpha = (Math.sin(time + i) + 1) / 2;
                
                ctx.fillStyle = `rgba(255, 20, 147, ${alpha})`;
                // Heart shape
                ctx.fillRect(heartX, heartY, 3, 3);
                ctx.fillRect(heartX + 4, heartY, 3, 3);
                ctx.fillRect(heartX - 1, heartY + 3, 5, 3);
                ctx.fillRect(heartX + 1, heartY + 6, 3, 2);
            }
        }

        function gameLoop() {
            if (!gameState.gameWon) {
                updatePlayer();
            }
            render();
            requestAnimationFrame(gameLoop);
        }

        function showWinMessage() {
            document.getElementById('winMessage').style.display = 'block';
        }

        function showGameOver() {
            document.getElementById('gameOver').style.display = 'block';
        }

        function restartGame() {
            // Reset game state
            gameState.player.x = 400;
            gameState.player.y = 550;
            gameState.player.velocityX = 0;
            gameState.player.velocityY = 0;
            gameState.player.onGround = false;
            gameState.player.charging = false;
            gameState.player.power = 0;
            gameState.camera.y = 0;
            gameState.gameWon = false;
            
            // Hide messages
            document.getElementById('gameOver').style.display = 'none';
            document.getElementById('winMessage').style.display = 'none';
        }

        // Start game
        gameLoop();
    </script>
</body>
</html>
